<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phishing Prevention System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="company-header">
        <div class="logo">
            <a href="index.html"><img src="Images/GOCLogo.png" alt="GOC Logo"></a>
        </div>
        <div class="company-name">
            Canada Revenue Agency
        </div>
    </header>

    <main>
        <div class="rectangle">
            <div class="pps"><h1>Phishing Prevention System (PPS)</h1></div>
            <h2>Employee Training</h2>

            <table class="phishing-table" id="resources-table">
                <thead>
                    <tr>
                        <th>Resource</th>
                        <th>Category</th>
                        <th>Website Link</th>
                        <th>Published</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Rows will be dynamically added here by JavaScript -->
                </tbody>
            </table>

            <p>For more information on how your privacy is protected, refer to our <a href="#">Personal Information Collection Statement</a>.</p>
        </div>
    </main>

    <footer>
        <div class="pps"></div>
        <div class="footer-links">
            <a href="#">Terms and Conditions</a> | <a href="#">Privacy</a>
        </div>
        <div class="footer-logo">
            <a href="index.html"><img src="Images/CanadaLogo.jpg" alt="Canada Logo"></a>
        </div>
    </footer>

    <script>
        // Fetch resources from the server and dynamically add them to the table
        fetch('/resources')
            .then(response => response.json())
            .then(data => {
                const tableBody = document.querySelector("#resources-table tbody");
                data.forEach(resource => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${resource.resource_name}</td>
                        <td>${resource.category}</td>
                        <td><a href="${resource.website_link}" target="_blank">${resource.website_link}</a></td>
                        <td>${resource.published}</td>
                    `;
                    tableBody.appendChild(row);
                });
            })
            .catch(error => console.error('Error fetching resources:', error));
    </script>
</body>
</html>
